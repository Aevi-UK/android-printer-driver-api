# Printer driver service

```java

public class DemoPrinterDriverService extends BasePrinterDriverService {

    private static final String TAG = DemoPrinterDriverService.class.getSimpleName();

    @Override
    protected void print(final PrintPayload payload) {
        Log.d(TAG, "Got print request: " + payload.getPrinterId());

        try {
            // Send print data to printer here
            // ... uses manufacturer printer API/SDK ...

            // Use this methods to send printJob status(es) back to the client
            PrintJob printJob = new PrintJob(PRINTED);
            sendMessageToClient(payload.getId(), printJob);

            // Use this method to notify the end the printJob
            sendEndStreamMessageToClient(payload.getId());
        } catch(Exception e) {

            // Use this method to notify if an unexpected error has occurred
            sendErrorMessageToClient(payload.getId(), PrinterMessages.ERROR_PRINT_FAILED,
                "Failed to print: " + e.getMessage());
        }
    }
}

```

The main driver service should extend the `BasePrinterDriverService` and implement the `print` method. This method is responsible for taking the `PrintPayload` contents given and sending it to the physical printer as requested.

The `PrintPayload.getPrinterId()` method contains the unique identifier of the printer that this print should be sent to. This identifier is generated by this driver application initially and sent to users via the settings provider detailed below.

Once the print has been successfully sent to the printer the driver should call the `sendMessageToClient` method reporting a `PrintJob` object back to the user. The `PrintJob` object contains the status of the print and potentially some useful diagnostic information if required.

The `PrintJob` object returned can contain the `State` of the print which is either `IN_PROGRESS`, `PRINTED` or `FAILED`.

If the printing fails unexpectedly then the driver should call the `sendErrorMessageToClient` with a suitable error response.